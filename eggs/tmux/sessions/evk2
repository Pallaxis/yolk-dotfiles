#!/usr/bin/env bash

session_name="evk2"
if [[ ! -d ~/work/projects/"$session_name" ]]; then
    mkdir -p ~/work/projects/"$session_name"
fi

# Create or attach to session (detached)
tmux new-session -Ad -s "$session_name"

# Creating windows with initial commands
tmux new-window -t $session_name:1 -k -n "proj dir" -c ~/work/projects/"$session_name"
tmux new-window -t $session_name:2 -k -n "tio" -c ~/ "sh -c 'tio /dev/serial/by-id/usb-FTDI_FT230X_Basic_UART_DT03T0N1-if00-port0; exec \$SHELL'"

# Modifying windows/panes
tmux split-window -h -p 50 -t "$session_name":2
tmux select-pane -t "$session_name":2.1

tmux switch-client -t "$session_name"
